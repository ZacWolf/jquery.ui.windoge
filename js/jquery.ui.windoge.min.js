/*! jquery.ui.windoge - v0.1.0 - 2018-12-19
 *
 * Adds draggable, resizable, maximizable, and minimizable windows to your site
 *
 * https://github.com/ZacWolf/jquery.ui.windoge
 * Copyright (c) 2014-2016 Zac Morris <zac@zacwolf.com> [http://www.zacwolf.com]
 * Licensed under GPL-3.0
 */
var winCounter=0;jQuery.widget("winDoge.window",{win:null,id:null,options:{id:"win"+winCounter++,winheader:"",winlogodropshadow:!0,winroundedcorners:"5",winstate:0,winperistposition:!1,winroundedcorners:!1,winclosable:!1,style:{width:"640px",height:"480px","min-width":"350px","min-height":"200px",position:"absolute",top:"10px",left:"10px"},on:{maximize:[],maxrestore:[],minimize:[],minrestore:[],resize:[],close:[]},one:{maximize:[],maxrestore:[],minimize:[],minrestore:[],resize:[],close:[]}},_create:function(){jQuery(this).attr("id",this.options.id),this.id=this.options.id;var self=this,pos,size;(jQuery(window).on("resize",function(i){self._testSize()}),0==jQuery("#windoge-pane").length&&jQuery("<div id='windoge-pane' class='ui-front'><div id='windoge-minimizedock' class='dock'><ul></ul></div></div>").appendTo(jQuery("body")),this.options.winroundedcorners&&(this.options.winroundedcorners=isNaN(this.options.winroundedcorners)?5:this.options.winroundedcorners<1?1:5<this.options.winroundedcorners?5:this.options.winroundedcorners),this.window=jQuery('<div class="windoge'+(this.options.windropshadow?" windropshadow":"")+(this.options.winroundedcorners?" rounded"+this.options.winroundedcorners+" topleft topright bottomleft bottomright":"")+'"><div class="rel"><table><thead><tr><td valign="top" colspan=3 id="'+this.id+'wintopbar" class="windogeheaderbar'+(this.options.winroundedcorners?" rounded"+this.options.winroundedcorners+" topleft topright":"")+'"><span id="'+this.id+'winheader" class="windogeheader'+(this.options.winlogo?"":" nologo")+'">'+this.options.winheader+'</span><div class="icons'+(this.options.winroundedcorners?" rounded"+this.options.winroundedcorners:"")+'"><div class="icon minimize"></div><div class="icon maximize"></div>'+(this.options.winclosable?'<div class="icon close"></div>':"")+'</div></td></tr></thead><tbody><tr><td valign="top" colspan=3 id="'+this.id+'wincontenttop" class="windogecontenttop'+(this.options.winlogo?" logospace":"")+'"></td></tr><tr height="100%" style="height:100%;"><td valign="top" id="'+this.id+'wincontentleft" class="windogecontentleft'+(this.options.winlogo?" logospace":"")+'"></td><td valign="top" class="windogecontentcenter" width="100%"><div id="'+this.id+'wincontentcenter" style="height:0;position:relative;"></div></td><td valign="top" id="'+this.id+'wincontentright" class="windogecontentleft"></td></tr><tr><td valign="bottom" colspan=3 id="'+this.id+'wincontentbttm" class="windogecontentbttm"></td></tr></tbody><tfoot><tr><td colspan=3 id="'+this.id+'winstatusbar" class="windogestatusbar'+(this.options.winroundedcorners?" rounded bottomleft bottomright":"")+'"><div id="'+this.id+'winstatusmsg" class="windogestatusmsg"></div><div id="'+this.id+'winresize" class="resizeicon ui-draggable ui-draggable-handle"></div></td></tr></tfoot></table>'+(this.options.winlogo?'<img id="'+this.id+'logo" class="logo'+(this.options.winlogodropshadow?" dropshadow":"")+'" src="'+this.options.winlogo+'" />':"")+"</div>").data("resizestart",{}).data("resizewidth",0).data("resideheight",0).appendTo("#windoge-pane").draggable({cursor:"move",handle:"#"+this.id+"wintopbar"}),jQuery.each(this.options,function(i,t){"style"===i.toLowerCase()&&"object"===jQuery.type(t)&&self.window.css(self.options.style)}),this.options.contenttopid&&jQuery(this.options.contenttopid).detach().appendTo("#"+this.id+"wincontenttop"),this.options.contentleftid&&jQuery(this.options.contentleftid).detach().appendTo("#"+this.id+"wincontentleft"),this.options.contentcenterid&&jQuery(this.options.contentid).detach().appendTo("#"+this.id+"wincontentcenter"),this.options.contentrightid&&jQuery(this.options.contentrightid).detach().appendTo("#"+this.id+"wincontentright"),this.options.contentbttmid&&jQuery(this.options.contentbttmid).detach().appendTo("#"+this.id+"wincontentbttm"),this.options.winpersistposition)&&(navigator.cookieEnabled?(eval("pos="+self._readCookie("windoge-"+this.id+"-pos")),null!=pos&&this.window.css(pos),eval("size="+self._readCookie("windoge-"+this.id+"-size")),null!=size&&(this.window.width(size.width),this.window.height(size.height))):self.setStatusMsg("<span style='color:#888888;font-weight:bold;'>Cookies not allowed, reseting to initial position and size.</span>"));return this},_init:function(){var a=this;return a.window.find(".windogeheaderbar .icon").each(function(){jQuery(this).hasClass("maximize")?a._maxwindoge(jQuery(this)):jQuery(this).hasClass("minimize")?a._minwindoge(jQuery(this)):jQuery(this).hasClass("close")&&a._closewindoge(jQuery(this))}).end().find(".resizeicon").each(function(){jQuery(this).draggable({drag:function(i,t){var e=a.window.offset(),n=t.offset,o=parseInt(a.window.css("min-width")),s=n.left-e.left,r=parseInt(a.window.css("min-height")),d=n.top-e.top;o<=s&&a.setwidth(s),r<=d&&a.setheight(d)},stop:function(i,t){a.options.winpersistposition&&a._createCookie("windoge-"+a.id+"-size","{'width':"+a.window.width()+",'height':"+a.window.height()+"}")},helper:"clone",opacity:.1,containment:"#windoge-pane",stack:".windoge"})}).end().on("mousedown",a._bringToTop).click(),a},_testSize:function(){var i=jQuery("#windoge-pane").width(),t=jQuery("#windoge-pane").height(),e=this.window.offset().left,n=this.window.width(),o=this.window.offset().top,s=this.window.height();i<e+n&&(n<i?this.window.css("left",i-n+"px"):(this.window.css("left",0),this.window.width(i-1))),t<o+s&&(s<t?this.window.css("top",t-s+"px"):(this.window.css("top",0),this.window.height(t-1)))},_triggerCustomOnEvents:function(i){return"function"===jQuery.type(this.options.on[i])?this.options.on[i].call(this):"array"===jQuery.type(this.options.on[i])&&jQuery(this.options.on[i]).each(function(){this.call(this)}),this},_triggerCustomOneEvents:function(i){if("function"===jQuery.type(this.options.one[i]))this.options.one[i].call(this),this.options.one[i]=void 0;else if("array"===jQuery.type(this.options.one[i]))for(;this.options.one[i].length;)this.options.one[i].shift().call(this);return this},_getAttributes:function(i){var e={};return i.length&&jQuery.each(i[0].attributes,function(i,t){e[t.name]=t.value}),e},_styles2json:function(i){var t={};if(!i)return t;if(i instanceof CSSStyleDeclaration)for(var e in i)i[e].toLowerCase&&(t[i[e].toLowerCase()]=i[i[e]]);else if("string"===jQuery.type(i))for(var e in i=i.split(";")){var n=i[e].split(":");n[0]&&(t[n[0].toLowerCase().trim()]=n[1].trim())}return t},_getdiffs:function(e,i){var n=new Object;return jQuery.each(i,function(i,t){t!=e[i]&&(n[i]=e[i])}),n},_copyComputedCSS:function(i){i instanceof jQuery&&(i=i[0]);var e=getComputedStyle(i,null),n={};return jQuery.each(e,function(i,t){n[t]=e[t]}),n},_maxwindoge:function(e){var n,o,s=this;o=function(i,t){e.removeClass("maximize").addClass("restore").one("click",n),s.window.find(".windogeheaderbar").css("cursor","auto").end().find(".resizeicon").hide().end().draggable("disable").effect("transfer",{to:"#windoge-pane",className:"ui-effects-transfer"},400,function(){s._triggerCustomOnEvents("maximize"),s._triggerCustomOneEvents("maximize")}).data("origWidth",s.window.width()).data("origHeight",s.window.height()).data("origStyle",s._getdiffs(s._copyComputedCSS(s.window),s._copyComputedCSS(s.window.addClass("maximized")))),s.options.winstate=1},n=function(i,t){e.removeClass("restore").addClass("maximize").one("click",o),s.window.find(".windogeheaderbar").css("cursor","move").end().find(".resizeicon").show().end().draggable("enable").removeClass("maximized").css(s.window.data("origStyle")).data("winstate",0),s._triggerCustomOnEvents("maxrestore"),s._triggerCustomOneEvents("maxrestore")},e.one("click",o)},_minwindoge:function(e){var n,o,s=this;o=function(i,t){jQuery("#windoge-minimizedock ul").append('<li id="'+s.id+'-min"><a><em><span>'+s.options.winheader+'</span></em><img src="'+s.options.winlogo+'" /></a></li>'),jQuery("#"+s.id+"-min img").one("click",n),s.window.effect("transfer",{to:"#"+s.id+"-min img",className:"ui-effects-transfer"},400,function(){s.window.fadeOut(100),s._triggerCustomOnEvents("minimize"),s._triggerCustomOneEvents("minimize")}),s.options.winstate=-1},n=function(i,t){s.window.fadeIn(100),s._testSize(),e.one("click",o),jQuery("#"+s.id+"-min").effect("transfer",{to:s.window,className:"ui-effects-transfer"},400,function(){this.remove(),s._triggerCustomOnEvents("minrestore"),s._triggerCustomOneEvents("minrestore")}),s.options.winstate=0},e.one("click",o)},_closewindoge:function(e){try{var n=function(i,t){this.window.hide(),e.one("click",n)};e.one("click",n)}finally{this._triggerCustomOnEvents("close"),this_triggerCustomOneEvents("close")}},_createCookie:function(i,t,e){if(!navigator.cookieEnabled)return!1;var n="; expires=Tue, 19 Jan 2038 03:14:07 UTC";if(e){var o=new Date;o.setTime(o.getTime()+24*e*60*60*1e3),n="; expires="+o.toGMTString()}return document.cookie=i+"="+t+n+";",!0},_readCookie:function(i){if(!navigator.cookieEnabled)return null;for(var t=i+"=",e=document.cookie.split(";"),n=0;n<e.length;n++){for(var o=e[n];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null},_eraseCookie:function(i){_createCookie(i,"",-1)},_bringToTop:function(i){var t=jQuery.makeArray(jQuery(".windoge")).sort(function(i,t){return(parseInt(jQuery(i).css("zIndex"),10)||0)-(parseInt(jQuery(t).css("zIndex"),10)||0)});if(t.length){var e=parseInt(jQuery(t[0]).css("zIndex"),10)||0;jQuery(t).each(function(i){jQuery(this).css("zIndex",e+i)}),jQuery(this).css("zIndex",e+t.length)}},findContent:function(){if(0<jQuery("#"+this.id+"wincontentcenter").length)return jQuery("#"+this.id+"wincontentcenter")},generateLoremIpsom:function(i,t){return("undefined"===jQuery.type(i)||isNaN(i))&&(i=5),loadContent("http://www.corsproxy.com/loripsum.net/api/"+i+"/medium/decorate/link/ul/ol/dl/bq/code/headers/",t)},loadContent:function(i,t){var e=this;return jQuery.ajax({type:"GET",url:i,dataType:"text",async:!0,success:function(i){e.findContent().html(i),"function"===jQuery.type(t)&&t()}}),this},setwidth:function(i){this.window.width(i);try{return this}finally{this._triggerCustomOnEvents("resize"),this._triggerCustomOneEvents("resize")}},setheight:function(i){this.window.height(i);try{return this}finally{this._triggerCustomOnEvents("resize"),this._triggerCustomOneEvents("resize")}},setHeightWidth:function(i,t){this.window.height(i),this.window.width(t);try{return this}finally{this._triggerCustomOnEvents("resize"),this._triggerCustomOneEvents("resize")}},find:function(i){return this.window.find(i)},on:function(i,t){if("undefined"!==jQuery.type(i)&&("string"===jQuery.type(i)||"function"===jQuery.type(t)))switch(i){case"maximize":this.options.on.maximize.push(t);break;case"minimize":this.options.on.minimize.push(t);break;case"maxrestore":this.options.on.maxrestore.push(t);break;case"minrestore":this.options.on.minrestore.push(t);break;case"resize":this.options.on.resize.push(t);break;case"close":this.options.on.close.push(t);break;default:this.window.on(i,t)}return this},one:function(i,t){if("undefined"!==jQuery.type(i)&&("string"===jQuery.type(i)||"function"===jQuery.type(t)))switch(i){case"maximize":this.options.one.maximize.push(t);break;case"minimize":this.options.one.minimize.push(t);break;case"maxrestore":this.options.one.maxrestore.push(t);break;case"minrestore":this.options.one.minrestore.push(t);break;case"resize":this.options.one.resize.push(t);break;case"close":this.options.one.close.push(t);break;default:this.window.one(i,t)}return this},minimize:function(i){return this.window.find(".minimize").click(),"function"===jQuery.type(i)&&i(),this},maximize:function(i){return this.window.find(".maximize").click(),"function"===jQuery.type(i)&&i(),this},restore:function(i){if(this.window.show(),0!=this.options.winstate)return 0<this.options.winstate?this.window.find(".restore").click():jQuery("#"+this.attr("id")+"-min img").click(),"function"===jQuery.type(i)&&i(),this},triggeron:function(i){this._triggerCustomOnEvents(i)},triggerone:function(i){this._triggerCustomOnEvents(i)},close:function(i){return this.find(".close").click(),"function"===jQuery.type(i)&&i(),this},setStatusMsg:function(i,t){return("undefined"===jQuery.type(t)||isNaN(t))&&(t=3e4),jQuery("#"+this.id+"winstatusmsg").stop(!0,!0).fadeOut("fast").html(i).fadeIn("fast"),0<t&&jQuery("#"+this.id+"winstatusmsg").delay(t).fadeOut("fast"),this}}),Object.keys||(Object.keys=function(){"use strict";var o=Object.prototype.hasOwnProperty,s=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=r.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var t,e,n=[];for(t in i)o.call(i,t)&&n.push(t);if(s)for(e=0;e<d;e++)o.call(i,r[e])&&n.push(r[e]);return n}}());
//# sourceMappingURL=jquery.ui.windoge.min.js.map