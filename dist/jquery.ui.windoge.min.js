/*! jquery.ui.windoge - v0.1.0 - 2014-12-18
 *
 * Adds draggable, resizable, maximizable, and minimizable windows to your site
 *
 * https://github.com/ZacWolf/jquery.ui.windoge
 * Copyright (c) 2014 Zac Morris <zac@zacwolf.com> [http://www.zacwolf.com]
 * Licensed under GPL-3.0
 */
var winDoge=function(a){var b=this;b.options=jQuery.extend(!0,{},this._defaults,a);var c={_getAttributes:function(a){var b={};return a.length&&jQuery.each(a[0].attributes,function(a,c){b[c.name]=c.value}),b},_styles2json:function(a){var b={};if(!a)return b;if(a instanceof CSSStyleDeclaration)for(var c in a)a[c].toLowerCase&&(b[a[c].toLowerCase()]=a[a[c]]);else if("string"===jQuery.type(a)){a=a.split(";");for(var c in a){var d=a[c].split(":");d[0]&&(b[d[0].toLowerCase().trim()]=d[1].trim())}}return b},_getdiffs:function(a,b){var c=new Object;return jQuery.each(b,function(b,d){d!=a[b]&&(c[b]=a[b])}),c},_copyComputedCSS:function(a){a instanceof jQuery&&(a=a[0]);var b=getComputedStyle(a,null),c={};return jQuery.each(b,function(a,d){c[d]=b[d]}),c},_maxwindoge:function(a){var d=function(){a.removeClass("restore").addClass("maximize").one("click",e),b.windoge.find(".windogebar").css("cursor","move").end().find(".resizeicon").show().end().draggable("enable").removeClass("maximized").css(b.windoge.data("origStyle")).data("winstate",0),b._triggerCustomOnEvents("maxrestore"),b._triggerCustomOneEvents("maxrestore"),b._triggerCustomOnEvents("resize"),b._triggerCustomOneEvents("resize")},e=function(){a.removeClass("maximize").addClass("restore").one("click",d),b.windoge.find(".windogebar").css("cursor","auto").end().find(".resizeicon").hide().end().draggable("disable").data("origWidth",b.windoge.width()).data("origHeight",b.windoge.height()).data("origStyle",c._getdiffs(c._copyComputedCSS(b.windoge),c._copyComputedCSS(b.windoge.addClass("maximized")))),b.options.winstate=1,b._triggerCustomOnEvents("maximize"),b._triggerCustomOneEvents("maximize"),b._triggerCustomOnEvents("resize"),b._triggerCustomOneEvents("resize")};a.one("click",e)},_minwindoge:function(a){var c=function(){b.windoge.fadeIn(800),b.options.winstate=0,jQuery("#"+b.id+"-min").effect("transfer",{to:b.windoge,className:"ui-effects-transfer"},400,function(){b._triggerCustomOnEvents("minrestore"),b._triggerCustomOneEvents("minrestore")}).remove(),b._testSize(b),a.one("click",d)},d=function(){jQuery("#windoge-minimizedock ul").append('<li id="'+b.id+'-min"><a><em><span>'+b.options.header+'</span></em><img src="'+b.options.winlogo+'" /></a></li>'),jQuery("#"+b.id+"-min img").one("click",c),b.windoge.effect("transfer",{to:"#"+b.id+"-min img",className:"ui-effects-transfer"},400,function(){b._triggerCustomOnEvents("minimize"),b._triggerCustomOneEvents("minimize")}).hide(),b.options.winstate=-1};a.one("click",d)}};jQuery(window).on("resize",function(){b._testSize(b)}),0==jQuery("#windoge-pane").length&&jQuery("<div id='windoge-pane' class='ui-front'><div id='windoge-minimizedock' class='dock'><ul></ul></div></div>").appendTo(jQuery("body")),b.options.winroundedcorners&&(b.options.winroundedcorners=isNaN(b.options.winroundedcorners)?5:b.options.winroundedcorners<1?1:b.options.winroundedcorners>5?5:b.options.winroundedcorners),b.windoge=jQuery('<div class="windoge'+(b.options.windropshadow?" windropshadow":"")+(b.options.winroundedcorners?" rounded"+b.options.winroundedcorners+" topleft topright bottomleft bottomright":"")+'"></div>'),b.options.id?b.windoge.attr("id",b.options.id):b.windoge.uniqueId(),jQuery.each(b.options,function(a,c){"style"===a.toLowerCase()&&"object"===jQuery.type(c)?(b.windoge.css(b.options.style),b.options.style=void 0):"on"!==a.toLowerCase()&&"one"!==a.toLowerCase()&&"contentdiv"!==a.toLowerCase()&&b.windoge.data(a,c)}),b.id=b.windoge.attr("id");{var d=jQuery('<div id="'+b.id+'topbar" class="windogebar'+(b.options.winroundedcorners?" rounded"+b.options.winroundedcorners+" topleft topright":"")+'"><span id="'+b.id+'barheader" class="header'+(b.options.winlogoshow?"":" nologo")+'">'+b.options.header+'</span><div class="icons'+(b.options.winroundedcorners?" rounded"+b.options.winroundedcorners:"")+'"><div class="icon minimize"></div><div class="icon maximize"></div></div></div>').appendTo(b.windoge),e=jQuery("<div id="+b.id+'bottombar" class="windogestatus'+(b.options.winroundedcorners?" rounded bottomleft bottomright":"")+'"><div id="'+b.id+'status" class="statusmsg"></div><div class="resizeicon"></div></div>').appendTo(b.windoge),f=jQuery('<div id="'+b.id+'middle" class="windogemiddle"></div>').appendTo(b.windoge);b.options.winlogoshow?jQuery('<img id="'+b.id+'logo" class="logo'+(b.options.winlogodropshadow?" dropshadow":"")+'" src="'+b.options.winlogo+'" />').appendTo(b.windoge):""}if(b.windoge.data("resizestart",{}).data("resizewidth",0).data("resideheight",0).appendTo(jQuery("#windoge-pane")).draggable({cursor:"move",containment:"window",scroll:!1,handle:jQuery(".windogebar"),stack:".windoge"}).on("click",function(){var a=jQuery.makeArray(jQuery(".windoge")).sort(function(a,b){return(parseInt(jQuery(a).css("zIndex"),10)||0)-(parseInt(jQuery(b).css("zIndex"),10)||0)});if(a.length){var b=parseInt(jQuery(a[0]).css("zIndex"),10)||0;jQuery(a).each(function(a){jQuery(this).css("zIndex",b+a)}),jQuery(this).css("zIndex",b+a.length)}}).find(".windogebar .icon").each(function(){jQuery(this).hasClass("maximize")?c._maxwindoge(jQuery(this)):jQuery(this).hasClass("minimize")&&c._minwindoge(jQuery(this))}).end().find(".resizeicon").each(function(){jQuery(this).draggable({drag:function(a,c){var d=b.windoge.offset(),e=c.offset,f=parseInt(b.windoge.css("min-width")),g=e.left+jQuery(this).width()-d.left,h=parseInt(b.windoge.css("min-height")),i=e.top-d.top;g>=f&&b.width(g),i>=h&&b.height(i)},helper:"clone",opacity:.1,containment:"window"})}),f.css({top:d.outerHeight()+3,bottom:e.outerHeight()}),b.options.contentdiv){var g=jQuery(b.options.contentdiv).detach();g.addClass("windogecontent"),f.append(g),b.options.contentdiv=void 0}};winDoge.prototype={windoge:void 0,id:void 0,options:{},_defaults:{winlogo:"minimized-icon.png",winlogoshow:!0,winroundedcorners:"5",winstate:0,style:{width:"640px",height:"480px","min-width":"350px","min-height":"200px"},on:{maximize:[],maxrestore:[],minimize:[],minrestore:[],resize:[]},one:{maximize:[],maxrestore:[],minimize:[],minrestore:[],resize:[]}},_testSize:function(a){var b=jQuery("body").width(),c=jQuery("body").height(),d=a.windoge.offset().left,e=a.windoge.width(),f=a.windoge.offset().top,g=a.windoge.height();d+e>b&&(b>e?a.windoge.css("left",b-e+"px"):(a.windoge.css("left",0),a.width(b-1))),f+g>c&&(c>g?a.windoge.css("top",c-g+"px"):(a.windoge.css("top",0),a.height(c-1)))},_triggerCustomOnEvents:function(a){var b=this;return"function"===jQuery.type(b.options.on[a])?b.options.on[a].call(b):"array"===jQuery.type(b.options.on[a])&&jQuery(b.options.on[a]).each(function(){this.call(b)}),b},_triggerCustomOneEvents:function(a){var b=this;if("function"===jQuery.type(b.options.one[a]))b.options.one[a].call(b),b.options.one[a]=void 0;else if("array"===jQuery.type(b.options.one[a]))for(;b.options.one[a].length;)b.options.one[a].shift().call(b);return b},width:function(a){if("undefined"===jQuery.type(a))return this.windoge.width();try{return this.windoge.width(a)}finally{this._triggerCustomOnEvents("resize"),this._triggerCustomOneEvents("resize")}},height:function(a){if("undefined"===jQuery.type(a))return this.windoge.height();try{return this.windoge.height(a)}finally{this._triggerCustomOnEvents("resize"),this._triggerCustomOneEvents("resize")}},find:function(a){return this.windoge.find(a)},end:function(){return this.windoge},on:function(a,b){if("undefined"!==jQuery.type(a)&&"string"===jQuery.type(a)&&"function"==jQuery.type(b)){var c=this;switch(a){case"maximize":c.options.on.maximize.push(b);break;case"minimize":c.options.on.minimize.push(b);break;case"maxrestore":c.options.on.maxrestore.push(b);break;case"minrestore":c.options.on.minrestore.push(b);break;case"resize":c.options.on.resize.push(b)}return this.windoge.on(a,b),this}},one:function(a,b){if("undefined"!==jQuery.type(a)&&"string"===jQuery.type(a)&&"function"==jQuery.type(b)){var c=this;switch(a){case"maximize":c.options.one.maximize.push(b);break;case"minimize":c.options.one.minimize.push(b);break;case"maxrestore":c.options.one.maxrestore.push(b);break;case"minrestore":c.options.one.minrestore.push(b);break;case"resize":c.options.on.resize.push(b)}return this.windoge.one(a,b),this}},minimize:function(a){return this.windoge.find(".minimize").click(),"function"===jQuery.type(a)&&a(),this},maximize:function(a){return this.windoge.find(".maximize").click(),"function"===jQuery.type(a)&&a(),this},restore:function(a){return 0!=this.options.winstate?(this.options.winstate>0?this.windoge.find(".restore").click():jQuery("#"+this.id+"-min img").click(),"function"===jQuery.type(a)&&a(),this):void 0}},jQuery.widget("winDoge.window",{windoge:void 0,options:{},_init:function(){"undefined"===jQuery.type(this.windoge)&&console.log("windoge not initilized")},_create:function(){("object"==jQuery.type(this.element)||"winDoge"==jQuery.type(this.element[0]))&&(this.windoge=this.element[0].windoge)},findContent:function(){this.windoge.find(".windogecontent")},generateLoremIpsom:function(a,b){("undefined"===jQuery.type(a)||isNaN(a))&&(a=5);var c=this;jQuery.ajax({type:"GET",url:"http://www.corsproxy.com/loripsum.net/api/"+a+"/medium/decorate/link/ul/ol/dl/bq/code/headers/",dataType:"text",async:!0,success:function(a){c.windoge.find(".windogecontent").html(a),"function"===jQuery.type(b)&&b()}})},setStatusMsg:function(a,b){("undefined"===jQuery.type(b)||isNaN(b))&&(b=3e4),this.windoge.find(".statusmsg").stop(!0,!0).fadeOut("fast").html(a).fadeIn("fast"),b>0&&this.windoge.find(".statusmsg").delay(b).fadeOut("fast")},on:function(a,b){this.windoge.on(a,b)},one:function(a,b){this.windoge.on(a,b)},minimize:function(a){this.windoge.find(".minimize").click(),"function"===jQuery.type(a)&&a()},maximize:function(a){this.windoge.find(".maximize").click(),"function"===jQuery.type(a)&&a()}});