/*! jquery.ui.windoge - v0.1.0 - 2014-12-15
 *
 * Adds draggable, resizable, maximizable, and minimizable windows to your site
 *
 * https://github.com/ZacWolf/jquery.ui.windoge
 * Copyright (c) 2014 Zac Morris <zac@zacwolf.com> [http://www.zacwolf.com]
 * Licensed under GPL-3.0
 */
var winDoge=function(a){var b={_getAttributes:function(a){var b={};return a.length&&$.each(a[0].attributes,function(a,c){b[c.name]=c.value}),b},_styles2json:function(a){var b={};if(!a)return b;if(a instanceof CSSStyleDeclaration)for(var c in a)a[c].toLowerCase&&(b[a[c].toLowerCase()]=a[a[c]]);else if("string"==typeof a){a=a.split(";");for(var c in a){var d=a[c].split(":");d[0]&&(b[d[0].toLowerCase().trim()]=d[1].trim())}}return b},_getdiffs:function(a,b){var c=new Object;return $.each(b,function(b,d){d!=a[b]&&(c[b]=a[b])}),c},_copyComputedCSS:function(a){a instanceof jQuery&&(a=a[0]);var b=getComputedStyle(a,null),c={};return $.each(b,function(a,d){c[d]=b[d]}),c},_onresizedrag:function(a,b){var c=$(this).parents(".windoge"),d=c.offset(),e=b.offset,f=parseInt(c.css("min-width")),g=e.left-d.left,h=parseInt(c.css("min-height")),i=e.top-d.top;g>=f&&c.width(g),i>=h&&c.height(i)},_maxwindoge:function(a,c){var d=function(){for(c.removeClass("restore").addClass("maximize").one("click",e),a.windoge.find(".windogebar").css("cursor","move").end().find(".resizeicon").show().end().draggable("enable").removeClass("maximized").css(a.windoge.data("origStyle")).data("windogestate",0);a.customevents.one.maxrestore.length;)a.customevents.one.maxrestore.shift().call();$(a.customevents.on.maxrestore).each(function(){})},e=function(){for(c.removeClass("maximize").addClass("restore").one("click",d),a.windoge.find(".windogebar").css("cursor","auto").end().find(".resizeicon").hide().end().draggable("disable").data("origWidth",a.windoge.width()).data("origHeight",a.windoge.height()).data("origStyle",b._getdiffs(b._copyComputedCSS(a.windoge),b._copyComputedCSS(a.windoge.addClass("maximized")))).data("windogestate",1);a.customevents.one.maximize.length;)a.customevents.one.maximize.shift().call();$(a.customevents.on.maximize).each(this)};c.one("click",e)},_minwindoge:function(a,b){var c=function(){a.windoge.fadeIn(800).data("windogestate",0),$("#"+a.windoge.attr("id")+"-min").effect("transfer",{to:a.windoge,className:"ui-effects-transfer"},400,function(){for(;a.customevents.one.minrestore.length;)a.customevents.one.minrestore.shift().call();$(a.customevents.on.minrestore).each(this)}).remove()},d=function(){$("#windoge-minimizedock ul").append('<li id="'+a.windoge.attr("id")+'-min"><a><em><span>'+a.windoge.data("header")+'</span></em><img src="'+a.windoge.data("winlogo")+'" /></a></li>'),$("#"+a.windoge.attr("id")+"-min img").one("click",c),a.windoge.effect("transfer",{to:"#"+a.windoge.attr("id")+"-min img",className:"ui-effects-transfer"},400,function(){for(;a.customevents.one.minimize.length;)a.customevents.one.minimize.shift().call();$(a.customevents.on.minimize).each(this)}).hide().data("windogestate",-1)};b.on("click",d)}},c=this;a=$.extend(!0,{},this._defaults,a),0==$("#windoge-pane").length&&$("<div id='windoge-pane' class='ui-front'><div id='windoge-minimizedock' class='dock'><ul></ul></div></div>").appendTo($("body")),a.winroundedcorners&&(a.winroundedcorners=isNaN(a.winroundedcorners)?5:a.winroundedcorners<1?1:a.winroundedcorners>5?5:a.winroundedcorners),this.windoge=$('<div class="windoge'+(a.windropshadow?" windropshadow":"")+(a.winroundedcorners?" rounded"+a.winroundedcorners+" topleft topright bottomleft bottomright":"")+'"></div>'),a.id?this.windoge.attr("id",a.id):this.windoge.uniqueId(),$.each(a,function(a,b){"on"===a.toLowerCase()&&"object"==typeof a?$.each(b,c.on):"style"!==a&&"contentdiv"!==a&&c.windoge.data(a,b)}),this.id=this.windoge.attr("id");{var d=$('<div id="'+this.id+'topbar" class="windogebar'+(a.winroundedcorners?" rounded"+a.winroundedcorners+" topleft topright":"")+'"><span id="'+this.id+'barheader" class="header'+(a.winlogoshow?"":" nologo")+'">'+a.header+'</span><div class="icons'+(a.winroundedcorners?" rounded"+a.winroundedcorners:"")+'"><div class="icon minimize"></div><div class="icon maximize"></div></div></div>').appendTo(this.windoge),e=$("<div id="+this.id+'bottombar" class="windogestatus'+(a.winroundedcorners?" rounded bottomleft bottomright":"")+'"><div id="'+this.id+'status" class="statusmsg"></div><div class="resizeicon"></div></div>').appendTo(this.windoge),f=$('<div id="'+this.id+'middle" class="windogemiddle"></div>').appendTo(this.windoge);a.winlogoshow?$('<img id="'+this.id+'logo" class="logo'+(a.winlogodropshadow?" dropshadow":"")+'" src="'+a.winlogo+'" />').appendTo(this.windoge):""}if(this.windoge.css(a.style).data("resizestart",{}).data("resizewidth",0).data("resideheight",0).appendTo($("#windoge-pane")).draggable({cursor:"move",containment:"window",scroll:!1,handle:$(".windogebar"),stack:".windoge"}).on("click",function(){var a=$.makeArray($(".windoge")).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});if(a.length){var b=parseInt($(a[0]).css("zIndex"),10)||0;$(a).each(function(a){$(this).css("zIndex",b+a)}),$(this).css("zIndex",b+a.length)}}).find(".windogebar .icon").each(function(){$(this).hasClass("maximize")?b._maxwindoge(c,$(this)):$(this).hasClass("minimize")&&b._minwindoge(c,$(this))}).end().find(".resizeicon").each(function(){$(this).draggable({drag:b._onresizedrag,helper:"clone",opacity:.1})}),f.css({top:d.outerHeight()+3,bottom:e.outerHeight()}),a.contentdiv){var g=$(a.contentdiv).detach();g.addClass("windogecontent"),f.append(g)}};winDoge.prototype={windoge:void 0,customevents:{on:{maximize:[],maxrestore:[],minimize:[],minrestore:[]},one:{maximize:[],maxrestore:[],minimize:[],minrestore:[]}},id:void 0,_defaults:{winlogo:"minimized-icon.png",winlogoshow:!0,winroundedcorners:"5",style:{width:"640px",height:"480px","min-width":"350px","min-height":"200px"}},on:function(a,b){if("undefined"!=typeof a&&"string"==typeof a&&"function"==typeof b){var c=this;switch(a){case"maximize":return c.customevents.on.maximize.push(b),c;case"minimize":return c.customevents.on.minimize.push(b),c;case"maxrestore":return c.customevents.on.maxrestore.push(b),c;case"minrestore":return c.customevents.on.minrestore.push(b),c}return this.windoge.on(a,b),this}},one:function(a,b){if("undefined"!=typeof a&&"string"==typeof a&&"function"==typeof b){var c=this;switch(a){case"maximize":return c.customevents.one.maximize.push(b),c;case"minimize":return c.customevents.one.minimize.push(b),c;case"maxrestore":return c.customevents.one.maxrestore.push(b),c;case"minrestore":return c.customevents.one.minrestore.push(b),c}return this.windoge.one(a,b),this}},minimize:function(a){return this.windoge.find(".minimize").click(),"function"==typeof a&&a(),this},maximize:function(a){return this.windoge.find(".maximize").click(),"function"==typeof a&&a(),this},restore:function(a){return 0!=this.windoge.data("windogestate")?(this.windoge.data("windogestate")>0?this.windoge.find(".restore").click():$("#"+this.windoge.attr("id")+"-min img").click(),"function"==typeof a&&a(),this):void 0}},$.widget("winDoge.window",{windoge:void 0,options:{},_init:function(){"undefined"==typeof this.windoge&&console.log("windoge not initilized")},_create:function(){("object"==typeof this.element||"winDoge"==typeof this.element[0])&&(this.windoge=this.element[0].windoge)},findContent:function(){this.windoge.find(".windogecontent")},generateLoremIpsom:function(a,b){("undefined"==typeof a||isNaN(a))&&(a=5);var c=this;$.ajax({type:"GET",url:"http://www.corsproxy.com/loripsum.net/api/"+a+"/medium/decorate/link/ul/ol/dl/bq/code/headers/",dataType:"text",async:!0,success:function(a){c.windoge.find(".windogecontent").html(a),"function"==typeof b&&b()}})},setStatusMsg:function(a,b){("undefined"==typeof b||isNaN(b))&&(b=3e4),this.windoge.find(".statusmsg").stop(!0,!0).fadeOut("fast").html(a).fadeIn("fast"),b>0&&this.windoge.find(".statusmsg").delay(b).fadeOut("fast")},on:function(a,b){this.windoge.on(a,b)},one:function(a,b){this.windoge.on(a,b)},minimize:function(a){this.windoge.find(".minimize").click(),"function"==typeof a&&a()},maximize:function(a){this.windoge.find(".maximize").click(),"function"==typeof a&&a()}});