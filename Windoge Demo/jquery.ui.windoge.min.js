/*
* windoge jQuery UI plugin v0.5
*
* Adds draggable, resizable, maximizable, and minimizable windows to your site
*
* Copyright (c) 2014 Zac Morris
* https://github.com/ZacWolf/jquery.ui.windogedows
* http://zacwolf.com
* Licensed under the GNU GENERAL PUBLIC LICENSE Version 3, 29 June 2007
*/
var winDoge=function(e){var t={_getAttributes:function(e){var t={};if(e.length){$.each(e[0].attributes,function(e,n){t[n.name]=n.value})}return t},_styles2json:function(e){var t={};if(!e)return t;if(e instanceof CSSStyleDeclaration){for(var n in e){if(e[n].toLowerCase){t[e[n].toLowerCase()]=e[e[n]]}}}else if(typeof e=="string"){e=e.split(";");for(var n in e){var r=e[n].split(":");if(r[0])t[r[0].toLowerCase().trim()]=r[1].trim()}}return t},_getdiffs:function(e,t){var n=new Object;$.each(t,function(t,r){if(r!=e[t])n[t]=e[t]});return n},_copyComputedCSS:function(e){if(e instanceof jQuery)e=e[0];var t=getComputedStyle(e,null);var n={};$.each(t,function(e,r){n[r]=t[r]});return n},_onresizedrag:function(e,t){var n=$(this).parents(".windoge");var r=n.offset();var i=t.offset;var s=parseInt(n.css("min-width"));var o=i.left-r.left;var u=parseInt(n.css("min-height"));var a=i.top-r.top;if(o>=s)n.width(o);if(a>=u)n.height(a)},_maxwindoge:function(e,n){var r=this;var i=function(){n.removeClass("restore").addClass("maximize").one("mouseup",s);e.find(".windogebar").css("cursor","move");e.draggable("enable").removeClass("maximized").css(e.data("origStyle")).data("windogestate",0).data("onmaxrestore")(e.data("origWidth"),e.data("origHeight"))};var s=function(){n.removeClass("maximize").addClass("restore").one("mouseup",i);e.find(".windogebar").css("cursor","auto");e.draggable("enable").data("origWidth",e.width()).data("origHeight",e.height()).data("origStyle",t._getdiffs(t._copyComputedCSS(e),t._copyComputedCSS(e.addClass("maximized")))).data("windogestate",1).data("onmaximize")()};n.one("mouseup",s)},_minwindoge:function(e,t){var n=function(){e.fadeIn(800).data("windogestate",0);$("#windoge-minimizedock > #"+e.attr("id")+"-min").effect("transfer",{to:e,className:"ui-effects-transfer"},400,e.data("onminrestore")).remove()};var r=function(){$("#windoge-minimizedock").append("<img id='"+e.attr("id")+"-min' class='minimizedlogo' />");$("#"+e.attr("id")+"-min").attr("src",e.data("winlogo"));$("#windoge-minimizedock > #"+e.attr("id")+"-min").show().one("click",n);e.effect("transfer",{to:"#windoge-minimizedock > #"+e.attr("id")+"-min",className:"ui-effects-transfer"},400,e.data("onminimize")).hide().data("windogestate",-1)};t.on("mouseup",r)},_loadContent:function(e,t){}};var n=this;e=$.extend(true,{},this._defaults,e);if($("#windoge-pane").length==0)$("<div id='windoge-pane' class='ui-front'><div id='windoge-minimizedock'></div></div>").appendTo($("body"));this.windoge=$('<div class="windoge" cellspacing=0 cellpadding=0></div>');if(e.id)this.windoge.attr("id",e.id);else this.windoge.uniqueId();$.each(e,function(e,t){if(e!=="style")n.windoge.data(e,t)});var r=this.windoge.attr("id");var i=$('<div id="'+r+'topbar" class="windogebar">'+'<span id="'+r+'barheader" class="header'+(e.winlogoshow?"":" nologo")+'">'+e.header+"</span>"+'<div class="icons">'+'<div class="icon minimize"></div>'+'<div class="icon maximize"></div>'+"</div>"+"</div>").appendTo(this.windoge);var s=$("<div id="+r+'bottombar" class="windogestatus">'+'<div id="'+r+'status" class="statusmsg"></div>'+'<div class="resizeicon"></div>'+"</div>").appendTo(this.windoge);var o=$('<div id="'+r+'middle" class="windogemiddle">'+'<div id="'+r+'middlecontent" class="windogecontent'+(e.winlogoshow?"":" nologo")+'"></div>'+"</div>").appendTo(this.windoge);var u=e.winlogoshow?$('<img id="'+r+'logo" class="logo" src="'+e.winlogo+'" />').appendTo(this.windoge):"";this.windoge.css(e.style).data("resizestart",{}).data("resizewidth",0).data("resideheight",0).appendTo($("#windoge-pane")).draggable({cursor:"move",containment:"window",scroll:false,handle:$(".windogebar")}).on("mousedown",function(){$(this).parent().append($(this))}).find(".windogebar .icon").each(function(){if($(this).hasClass("maximize"))t._maxwindoge(n.windoge,$(this));else if($(this).hasClass("minimize"))t._minwindoge(n.windoge,$(this))}).end().find(".resizeicon").each(function(){$(this).draggable({drag:t._onresizedrag,helper:"clone",opacity:.1})}).end().find(".windogecontent").on("mousedown",function(){n.windoge.parent().append(n.windoge)});o.css({top:i.height(),bottom:s.outerHeight()})};winDoge.prototype={windoge:undefined,_defaults:{winlogo:"minimized-icon.png",winlogoshow:true,onmaximize:function(e,t){},onmaxrestore:function(e,t){},onminimize:function(e,t){},onminrestore:function(e,t){},style:{width:"640px",height:"480px","min-width":"350px","min-height":"200px"}}};$.widget("winDoge.window",{windoge:undefined,options:{},_init:function(){if(typeof this.windoge==="undefined")console.log("windoge not initilized")},_create:function(){if(typeof this.element!="object"&&typeof this.element[0]!="winDoge")return;this.windoge=this.element[0].windoge},findContent:function(){this.windoge.find(".windogecontent")},generateLoremIpsom:function(e,t){if(typeof e==="undefined"||isNaN(e))e=5;var n=this;$.ajax({type:"GET",url:"http://www.corsproxy.com/loripsum.net/api/"+e+"/medium/decorate/link/ul/ol/dl/bq/code/headers/",dataType:"text",async:true,success:function(e){n.windoge.find(".windogecontent").html(e);if(typeof t==="function")t()}})},setStatusMsg:function(e,t){if(typeof t==="undefined"||isNaN(t))t=3e4;this.windoge.find(".statusmsg").stop(true,true).fadeOut("fast").html(e).fadeIn("fast");if(t>0)this.windoge.find(".statusmsg").delay(t).fadeOut("fast")}});$.fn.isOverflowing=function(){var e=this[0];return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth}