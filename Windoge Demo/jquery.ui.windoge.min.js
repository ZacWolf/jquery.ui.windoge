/*
* windoge jQuery UI plugin v0.5
*
* Adds draggable, resizable, maximizable, and minimizable windows to your site
*
* Copyright (c) 2014 Zac Morris
* https://github.com/ZacWolf/jquery.ui.windogedows
* http://zacwolf.com
* Licensed under the GNU GENERAL PUBLIC LICENSE Version 3, 29 June 2007
*/
var winDoge=function(e){var t={_getAttributes:function(e){var t={};if(e.length){$.each(e[0].attributes,function(e,n){t[n.name]=n.value})}return t},_styles2json:function(e){var t={};if(!e)return t;if(e instanceof CSSStyleDeclaration){for(var n in e){if(e[n].toLowerCase){t[e[n].toLowerCase()]=e[e[n]]}}}else if(typeof e=="string"){e=e.split(";");for(var n in e){var r=e[n].split(":");if(r[0])t[r[0].toLowerCase().trim()]=r[1].trim()}}return t},_getdiffs:function(e,t){var n=new Object;$.each(t,function(t,r){if(r!=e[t])n[t]=e[t]});return n},_copyComputedCSS:function(e){if(e instanceof jQuery)e=e[0];var t=getComputedStyle(e,null);var n={};$.each(t,function(e,r){n[r]=t[r]});return n},_onresizedrag:function(e,t){var n=$(this).parents(".windoge");var r=n.offset();var i=t.offset;var s=parseInt(n.css("min-width"));var o=i.left-r.left;var u=parseInt(n.css("min-height"));var a=i.top-r.top;if(o>=s)n.width(o);if(a>=u)n.height(a)},_maxwindoge:function(e,n){var r=function(t,r){n.removeClass("restore").addClass("maximize").one("click",i);e.windoge.find(".windogebar").css("cursor","move").end().draggable("enable").removeClass("maximized").css(windoge.data("origStyle")).data("windogestate",0);while(e.customevents.one.maxrestore.length)e.customevents.one.maxrestore.shift().call(this("origWidth"),windoge.data("origHeight"));$(e.customevents.on.maxrestore).each(function(){this.call(this("origWidth"),windoge.data("origHeight"))})};var i=function(i,s){n.removeClass("maximize").addClass("restore").one("click",r);e.windoge.find(".windogebar").css("cursor","auto").end().draggable("disable").data("origWidth",e.windoge.width()).data("origHeight",e.windoge.height()).data("origStyle",t._getdiffs(t._copyComputedCSS(e.windoge),t._copyComputedCSS(e.windoge.addClass("maximized")))).data("windogestate",1);while(e.customevents.one.maximize.length)e.customevents.one.maximize.shift().call();$(e.customevents.on.maximize).each(this)};n.one("click",i)},_minwindoge:function(e,t){var n=function(t,n){e.windoge.fadeIn(800).data("windogestate",0);$("#windoge-minimizedock > #"+e.windoge.attr("id")+"-min").effect("transfer",{to:e.windoge,className:"ui-effects-transfer"},400,function(){while(e.customevents.one.minrestore.length)e.customevents.one.minrestore.shift().call();$(e.customevents.on.minrestore).each(this)}).remove()};var r=function(t,r){$("#windoge-minimizedock").append("<img id='"+e.windoge.attr("id")+"-min' class='minimizedlogo' />");$("#"+e.windoge.attr("id")+"-min").attr("src",e.windoge.data("winlogo"));$("#windoge-minimizedock > #"+e.windoge.attr("id")+"-min").show().one("click",n);e.windoge.effect("transfer",{to:"#windoge-minimizedock > #"+e.windoge.attr("id")+"-min",className:"ui-effects-transfer"},400,function(){while(e.customevents.one.minimize.length)e.customevents.one.minimize.shift().call();$(e.customevents.on.minimize).each(this)}).hide().data("windogestate",-1)};t.on("click",r)},_loadContent:function(e,t){}};var n=this;e=$.extend(true,{},this._defaults,e);if($("#windoge-pane").length==0)$("<div id='windoge-pane' class='ui-front'><div id='windoge-minimizedock'></div></div>").appendTo($("body"));this.windoge=$('<div class="windoge"></div>');if(e.id)this.windoge.attr("id",e.id);else this.windoge.uniqueId();$.each(e,function(e,t){if(e.toLowerCase()==="on"&&typeof e==="object"){$.each(e,n.on)}else if(e!=="style"&&e!=="contentdiv")n.windoge.data(e,t)});this.id=this.windoge.attr("id");var r=$('<div id="'+this.id+'topbar" class="windogebar">'+'<span id="'+this.id+'barheader" class="header'+(e.winlogoshow?"":" nologo")+'">'+e.header+"</span>"+'<div class="icons">'+'<div class="icon minimize"></div>'+'<div class="icon maximize"></div>'+"</div>"+"</div>").appendTo(this.windoge);var i=$("<div id="+this.id+'bottombar" class="windogestatus">'+'<div id="'+this.id+'status" class="statusmsg"></div>'+'<div class="resizeicon"></div>'+"</div>").appendTo(this.windoge);var s=$('<div id="'+this.id+'middle" class="windogemiddle"></div>').appendTo(this.windoge);var o=e.winlogoshow?$('<img id="'+this.id+'logo" class="logo" src="'+e.winlogo+'" />').appendTo(this.windoge):"";this.windoge.css(e.style).data("resizestart",{}).data("resizewidth",0).data("resideheight",0).appendTo($("#windoge-pane")).draggable({cursor:"move",containment:"window",scroll:false,handle:$(".windogebar"),stack:".windoge"}).find(".windogebar .icon").each(function(){if($(this).hasClass("maximize"))t._maxwindoge(n,$(this));else if($(this).hasClass("minimize"))t._minwindoge(n,$(this))}).end().find(".resizeicon").each(function(){$(this).draggable({drag:t._onresizedrag,helper:"clone",opacity:.1})});s.css({top:r.outerHeight()+3,bottom:i.outerHeight()});if(e.contentdiv){var u=$(e.contentdiv).detach();u.addClass("windogecontent");s.append(u)}};winDoge.prototype={windoge:undefined,customevents:{on:{maximize:[],maxrestore:[],minimize:[],minrestore:[]},one:{maximize:[],maxrestore:[],minimize:[],minrestore:[]}},id:undefined,_defaults:{winlogo:"minimized-icon.png",winlogoshow:true,style:{width:"640px",height:"480px","min-width":"350px","min-height":"200px"}},on:function(e,t){if(typeof e==="undefined"||typeof e!=="string"||typeof t!="function")return;var n=this;switch(e){case"maximize":n.customevents.on.maximize.push(t);return n;case"minimize":n.customevents.on.minimize.push(t);return n;case"maxrestore":n.customevents.on.maxrestore.push(t);return n;case"minrestore":n.customevents.on.minrestore.push(t);return n}this.windoge.on(e,t);return this},one:function(e,t){if(typeof e==="undefined"||typeof e!=="string"||typeof t!="function")return;var n=this;switch(e){case"maximize":n.customevents.one.maximize.push(t);return n;case"minimize":n.customevents.one.minimize.push(t);return n;case"maxrestore":n.customevents.one.maxrestore.push(t);return n;case"minrestore":n.customevents.one.minrestore.push(t);return n}this.windoge.one(e,t);return this},minimize:function(e){this.windoge.find(".minimize").click();if(typeof e==="function")e();return this},maximize:function(e){this.windoge.find(".maximize").click();if(typeof e==="function")e();return this}};$.widget("winDoge.window",{windoge:undefined,options:{},_init:function(){if(typeof this.windoge==="undefined")console.log("windoge not initilized")},_create:function(){if(typeof this.element!="object"&&typeof this.element[0]!="winDoge")return;this.windoge=this.element[0].windoge},findContent:function(){this.windoge.find(".windogecontent")},generateLoremIpsom:function(e,t){if(typeof e==="undefined"||isNaN(e))e=5;var n=this;$.ajax({type:"GET",url:"http://www.corsproxy.com/loripsum.net/api/"+e+"/medium/decorate/link/ul/ol/dl/bq/code/headers/",dataType:"text",async:true,success:function(e){n.windoge.find(".windogecontent").html(e);if(typeof t==="function")t()}})},setStatusMsg:function(e,t){if(typeof t==="undefined"||isNaN(t))t=3e4;this.windoge.find(".statusmsg").stop(true,true).fadeOut("fast").html(e).fadeIn("fast");if(t>0)this.windoge.find(".statusmsg").delay(t).fadeOut("fast")},on:function(e,t){this.windoge.on(e,t)},one:function(e,t){this.windoge.on(e,t)},minimize:function(e){this.windoge.find(".minimize").click();if(typeof e==="function")e()},maximize:function(e){this.windoge.find(".maximize").click();if(typeof e==="function")e()}})